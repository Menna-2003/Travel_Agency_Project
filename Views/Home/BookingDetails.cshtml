@model BookingDetails
@{
    Layout = "_Layout";
}

<style>
    .progress {
        top: 150px;
        left: 371px;
    }
</style>

<a asp-action="Index" class="backBtn w-25 container text-decoration-none">
    <i class="fa-solid fa-arrow-left" style="color: #b0b0b0"></i>
    <span>Back</span>
</a>

<div class="progress w-50 h-auto m-1">
    <div class="progress-bar" role="progressbar" style="width: 00%; background-color: #fa8b02; height: 5px" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
</div>

<div class="buttons mt-5 mb-5">
    <div class="one">1</div>
    <div class="two">2</div>
    <div class="three">3</div>
</div>

<form asp-action="BookingDetails" asp-controller="Home" method="post" >
    <div class="d-flex m-5 justify-content-center gap-5">

        <div class="containerLeft w-50 mt-5">
            <h4>Select Your Tickets</h4>
            <p class="bg-light p-3">
                Children Tickets with discount 50% <br />
                Infant Tickets with discount 75% 
            </p>

            <div class="option d-flex justify-content-between p-3 mt-3">
                <div class="text">
                    <h5>Adult (18+)</h5>
                    <p>$@Model.Tour.Price</p>
                </div>
                <div class="qty d-flex justify-content-end align-items-center">
                    <span class="minus" id="minus1">-</span>
                    <input asp-for="AdultTickets" type="number" id="AdultsInput" class="count" />
                    <span class="plus" id="plus1">+</span>
                </div>
            </div>

            <div class="option d-flex justify-content-between p-3 mt-3">
                <div class="text">
                    <h5>Child (6-17)</h5>
                    <p>$@(Model.Tour.Price * 0.5)</p>
                </div>
                <div class="qty d-flex justify-content-end align-items-center">
                    <span class="minus" id="minus2">-</span>
                    <input asp-for="ChildTickets" type="number" id="ChildTickets" class="count" />
                    <span class="plus" id="plus2">+</span>
                </div>
            </div>

            <div class="option d-flex justify-content-between p-3 mt-3 mb-5">
                <div class="text">
                    <h5>Infant (0-5)</h5>
                    <p>$@(Model.Tour.Price * 0.25)</p>
                </div>
                <div class="qty d-flex justify-content-end align-items-center">
                    <span class="minus" id="minus3">-</span>
                    <input asp-for="InfantTickets" type="number" id="InfantTickets" class="count" />
                    <span class="plus" id="plus3">+</span>
                </div>
            </div>

        </div>

        <div class="ticketOverview p-4 d-grid">
            <h3>Your Tickets Overview</h3>
            <div class="box d-flex mt-4 gap-4" style="width:90%">
                <img src="@Url.Action("GetImage", "Home", new { id = Model.TourID })" alt="Tour Image"/>
                <div class="text">
                    <h5> @Model.Tour.Name </h5>
                    <p><i class="fa-regular fa-calendar-days"></i>@Model.Tour.StartDate</p>
                    <p><i class="fa-regular fa-calendar-days"></i>@Model.Tour.EndDate</p>
                </div>
            </div>
            <div class="details d-grid gap-4 mt-4">
                <div class="one w-100">
                    <div class="circleCounter" id="AdultsCounter">0</div>
                    <span>Adult (18+) (€@Model.Tour.Price)</span>
                    <span class="price" id="AdultsPrice" price="@Model.Tour.Price">€0</span>
                </div>

                <div class="two">
                    <div class="circleCounter" id="ChildrenCounter">0</div>
                    <span>Child (6-17) (€@(Model.Tour.Price * 0.5))</span>
                    <span class="price" id="ChildrenPrice" price="@(Model.Tour.Price * 0.5)">€0</span>
                </div>

                <div class="three">
                    <div class="circleCounter" id="InfantCounter">0</div>
                    <span>Infant (0-5) (€@(Model.Tour.Price * 0.25))</span>
                    <span class="price" id="InfantPrice" price="@(Model.Tour.Price * 0.25)">€0</span>
                </div>

                <div class="totalPrice">
                    <span>Total Price</span>
                    <span class="price" id="TotalPrice">€0</span>
                </div>
            </div>
            <a class="nextStepBtnLink w-100 text-center"><button class="nextStepBtn mt-4" type="submit">Go to next step</button></a>
        </div>

    </div>
</form>

<footer id="footer" class="footerLayout d-grid mt-5 text-light p-5 pb-0">
    <div class="container logo">
        <img src="~/images/logo.png" alt="" srcset="" />
    </div>
    <div class="container footerCont justify-content-between border-bottom border-top pb-5 pt-5 mt-3 mb-3">
        <div class="services">
            <h5>Services</h5>
            <ul class="list-unstyled mt-4">
                <li>Bike and Rickshaw rental</li>
                <li>Guided Tours of Lucca</li>
                <li>Guided Bike Tour of Lucca</li>
                <li>Trip In The Tuscan Hills</li>
                <li>Transportation With Luxury Cars</li>
                <li>Wine Tours By Bus With Guide</li>
            </ul>
        </div>
        <div class="home">
            <h5>Home</h5>
            <ul class="list-unstyled mt-4">
                <li>Home</li>
                <li>About Us</li>
                <li>Tour Packages</li>
            </ul>
        </div>
        <div class="help">
            <h5>Help</h5>
            <ul class="list-unstyled mt-4">
                <li>Terms of use</li>
                <li>Provicy Policy</li>
            </ul>
        </div>
        <div class="contacts">
            <h5>Contacts</h5>
            <ul class="list-unstyled mt-4">
                <li class="d-flex gap-3">
                    <i class="fa-solid fa-location-dot"></i>
                    <p>Maadi, Cairo</p>
                </li>
                <li class="d-flex gap-3">
                    <i class="fa-solid fa-phone"></i>
                    <p>+205828555454</p>
                </li>
                <li class="d-flex gap-3">
                    <i class="fa-solid fa-envelope"></i>
                    <p>example@gmail.com</p>
                </li>
            </ul>
        </div>
        <div class="socialMedia">
            <h5>Social Media</h5>
            <ul class="list-unstyled d-flex mt-4 gap-4 justify-content-center">
                <li><i class="fa-brands fa-facebook"></i></li>
                <li><i class="fa-brands fa-twitter"></i></li>
                <li><i class="fa-brands fa-instagram"></i></li>
            </ul>
        </div>
    </div>
    <div class="container m-0">
        <p class="text-center">Copyright © 2022. All rights reserved.</p>
    </div>
</footer>


<script>
    let TotalPrice = document.getElementById("TotalPrice");
    let TotalpriceVar = 0;

    let minus1 = document.getElementById("minus1");
    let plus1 = document.getElementById("plus1");
    let count1 = document.getElementById("AdultsInput");
    let AdultsCounter = document.getElementById("AdultsCounter");
    let AdultsPrice = document.getElementById("AdultsPrice");

    minus1.addEventListener("click", (e) => {
        if (count1.value != 0) {
            count1.setAttribute("value", Number(count1.value) - 1);

            AdultsCounter.innerText = count1.value;
            let price = Number(count1.value) * Number(AdultsPrice.getAttribute("price"));
            AdultsPrice.innerText = `€${price}`;

            TotalpriceVar -= Number(AdultsPrice.getAttribute("price"));
            TotalPrice.innerText = `€${TotalpriceVar}`;
        }
    });
    plus1.addEventListener("click", (e) => {
        if (Number(count1.value) < @Model.Tour.AdultsTickets ) {
            count1.setAttribute("value", Number(count1.value) + 1);
            AdultsCounter.innerText = count1.value;

            let price = Number(count1.value) * Number(AdultsPrice.getAttribute("price"));
            AdultsPrice.innerText = `€${price}`;

            TotalpriceVar += Number(AdultsPrice.getAttribute("price"));
            TotalPrice.innerText = `€${TotalpriceVar}`;
        }
    });

    let minus2 = document.getElementById("minus2");
    let plus2 = document.getElementById("plus2");
    let count2 = document.getElementById("ChildTickets");
    let ChildrenCounter = document.getElementById("ChildrenCounter");
    let ChildrenPrice = document.getElementById("ChildrenPrice");

    minus2.addEventListener("click", (e) => {
        if (count2.value != 0) {
            count2.setAttribute("value", Number(count2.value) - 1);

            ChildrenCounter.innerText = count2.value;
            let price2 = Number(count2.value) * Number(ChildrenPrice.getAttribute("price"));
            ChildrenPrice.innerText = `€${price2}`;
            console.log(count2.value);

            TotalpriceVar -= Number(ChildrenPrice.getAttribute("price"));
            TotalPrice.innerText = `€${TotalpriceVar}`;
        }
    });

    plus2.addEventListener("click", (e) => {
        if (Number(count2.value) < @Model.Tour.ChildrenTickets ) {
            count2.setAttribute("value", Number(count2.value) + 1);
            ChildrenCounter.innerText = count2.value;
            let price2 = Number(count2.value) * Number(ChildrenPrice.getAttribute("price"));
            ChildrenPrice.innerText = `€${price2}`;
            console.log(count2.value);

            TotalpriceVar += Number(ChildrenPrice.getAttribute("price"));
            TotalPrice.innerText = `€${TotalpriceVar}`;
        }
    });

    let minus3 = document.getElementById("minus3");
    let plus3 = document.getElementById("plus3");
    let count3 = document.getElementById("InfantTickets");
    let InfantCounter = document.getElementById("InfantCounter");
    let InfantPrice = document.getElementById("InfantPrice");

    minus3.addEventListener("click", (e) => {
        if (count3.value != 0) {
            count3.setAttribute("value", Number(count3.value) - 1);
            InfantCounter.innerText = count3.value;
            let price3 = Number(count3.value) * Number(InfantPrice.getAttribute("price"));
            InfantPrice.innerText = `€${price3}`;
            console.log(count3.value);

            TotalpriceVar -= Number(InfantPrice.getAttribute("price"));
            TotalPrice.innerText = `€${TotalpriceVar}`;
        }
    });
    plus3.addEventListener("click", (e) => {
        if (Number(count3.value) < @Model.Tour.InfantTickets ) {
            count3.setAttribute("value", Number(count3.value) + 1);
            InfantCounter.innerText = count3.value;
            let price3 = Number(count3.value) * Number(InfantPrice.getAttribute("price"));
            InfantPrice.innerText = `€${price3}`;
            console.log(count3.value);

            TotalpriceVar += Number(InfantPrice.getAttribute("price"));
            TotalPrice.innerText = `€${TotalpriceVar}`;
        }
    });

</script>